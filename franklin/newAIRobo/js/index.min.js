"use strict";function _asyncToGenerator(t){return function(){var s=t.apply(this,arguments);return new Promise(function(i,a){return function e(t,n){try{var r=s[t](n),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){e("next",t)},function(t){e("throw",t)});i(o)}("next")})}}Vue.use(VueScrollTo);var front={data:function(){return{localList:["10.88.110.89","10.88.110.62","10.127.105.69","10.127.105.74","127.0.0.1","localhost"],color:["#87c8db","#8491c7","#fa8666","#f4d66c","#AEC785"],RiskDict:{99:["2380a74e-2759-47d6-956c-065cdc748a69","\u4e0d\u9069\u5408Robo","\u8acb\u81f3\u4e00\u822c\u4ea4\u6613\u5e73\u53f0"],1:["2DB3A998-0C12-4EFD-A870-4A47169A6B59","\u4f4e\u98a8\u96aa","RR3"],2:["ECA257EC-E532-4D89-836E-D38597C9078C","\u4f4e\u98a8\u96aa","RR3"],3:["655B27AC-C2FA-4F7F-B88C-82EA6AB9CE22","\u4f4e\u98a8\u96aa","RR3"],4:["5F4F06BB-FE1A-468A-8DE2-7BB598BC50E9","\u4e2d\u7b49\u98a8\u96aa","RR4"],5:["54E44CDC-1D4A-47F8-8946-E6DAD3A84BE1","\u4e2d\u7b49\u98a8\u96aa","RR4"],6:["1FC6DD00-335C-4057-846C-1C52C604E71A","\u4e2d\u7b49\u98a8\u96aa","RR4"],7:["D83404E4-362B-4871-A337-34938DCD9157","\u9ad8\u98a8\u96aa","RR5"],8:["A5291768-C143-494E-A679-9E79B4A9BE1C","\u9ad8\u98a8\u96aa","RR5"],9:["74A0F757-1720-4F2A-832F-C35AB72AB742","\u9ad8\u98a8\u96aa","RR5"]},answer:{q1:"",q1_text:"",q2:5e4,q3:0,q4:0,q5:0,q6:0},res:{}}},computed:{testMode:function(){return"event.franklin.com.tw"!=location.hostname},localMode:function(){return-1<this.localList.indexOf(location.hostname)},apiUrl:function(){return this.testMode?"https://wt.franklin.com.tw/AI_Robo/Recomm/New/":"https://www.franklin.com.tw/AI_Robo/Recomm/New/"},valUrl:function(){return this.localMode?"http://demo3869121.mockable.io/":this.testMode?"https://wt.franklin.com.tw/Chart/NavData/":"https://www.franklin.com.tw/Chart/NavData/"},q1Word:function(){var t=["","\u5275\u696d\u57fa\u91d1","\u8cfc\u5c4b\u6e96\u5099","\u6559\u80b2\u57fa\u91d1","\u7d50\u5a5a\u6e96\u5099","\u9000\u4f11\u6e96\u5099","\u81ea\u8a02\u76ee\u6a19"],e=this.answer.q1?this.answer.q1.split("-")[1]:0;return 6==e?t[e]+"\uff1a"+this.answer.q1_text:t[e]},q3Word:function(){return["","1\u5e74\u4ee5\u4e0a ~ 3\u5e74","3\u5e74\u4ee5\u4e0a ~ 5\u5e74","5\u5e74\u4ee5\u4e0a ~ 10\u5e74"][this.answer.q3?this.answer.q3:0]},calculateScore:function(){return parseInt(this.answer.q4||0)+parseInt(this.answer.q5||0)+parseInt(this.answer.q6||0)},getScore:function(){var t=this.calculateScore,e=this.answer.q3;if(t<=3)return 99;if(4<=t&&t<=7)switch(e){default:case 1:return 1;case 2:return 2;case 3:return 3}if(8<=t&&t<=11)switch(e){default:case 1:return 4;case 2:return 5;case 3:return 6}if(12<=t&&t<=15)switch(e){default:case 1:return 7;case 2:return 8;case 3:return 9}},getRiskByScore:function(){return this.getScore?this.RiskDict[this.getScore][1]:""},getGuid:function(){return this.getScore?this.RiskDict[this.getScore][0]:""},getWording:function(){return this.getScore<=3?"\u4f60\u662f\u4e00\u4f4d\u5178\u578b\u98a8\u96aa\u8da8\u907f\u7684\u6295\u8cc7\u8005\uff0c\u975e\u5e38\u5728\u4e4e\u53d6\u5f97\u78ba\u5b9a\u7684\u6295\u8cc7\u56de\u5831\uff0c\u7121\u6cd5\u63a5\u53d7\u77ed\u671f\u5167\u8cc7\u7522\u7684\u5927\u5e45\u6ce2\u52d5\u3002":this.getScore<=6?"\u4f60\u662f\u4e00\u4f4d\u5728\u4e4e\u98a8\u96aa\u5927\u65bc\u6536\u76ca\u7684\u7a69\u5065\u578b\u6295\u8cc7\u8005\uff0c\u671f\u671b\u5728\u76f8\u5c0d\u4f4e\u98a8\u96aa\u4e2d\uff0c\u53ef\u4ee5\u53d6\u5f97\u8f03\u70ba\u7a69\u5065\u7684\u56de\u5831\u3002":"\u4f60\u53ef\u4ee5\u627f\u53d7\u8f03\u9ad8\u7684\u98a8\u96aa\uff0c\u70ba\u4e86\u8ffd\u6c42\u8f03\u5927\u7684\u56de\u5831\uff0c\u9858\u610f\u63a5\u53d7\u8cc7\u7522\u5728\u77ed\u671f\u7684\u5927\u5e45\u6ce2\u52d5\uff0c\u6216\u662f\u76f8\u5c0d\u8f03\u9577\u671f\u7684\u8667\u640d\u3002"},historyRate:function(){return this.res.risk_rate?this.res.risk_rate.toFixed(2):0},fundLength:function(){return this.res.risk_rate?this.res.rp_list.length:0}},beforeMount:function(){this.res=this.localMode?{risk_rate:7.20918,rp_list:[{FundInfo:{FundCategory:"\u5168\u7403\u80a1\u7968",FundId:"1000",FundName:"\u6e2c\u8a66\u57fa\u91d11",WarningDesc:null},InvestRatio:5},{FundInfo:{FundCategory:"\u7522\u696d\u578b",FundId:"1000",FundName:"\u6e2c\u8a66\u57fa\u91d12",WarningDesc:null},InvestRatio:5},{FundInfo:{FundCategory:"\u5e73\u8861\u578b",FundId:"1000",FundName:"\u6e2c\u8a66\u57fa\u91d13",WarningDesc:null},InvestRatio:20},{FundInfo:{FundCategory:"\u50b5\u5238\u578b",FundId:"1000",FundName:"\u6e2c\u8a66\u57fa\u91d14",WarningDesc:"\ufe59\u672c\u57fa\u91d1\u4e4b\u914d\u606f\u4f86\u6e90\u53ef\u80fd\u70ba\u672c\u91d1\ufe5a"},InvestRatio:35},{FundInfo:{FundCategory:"\u50b5\u5238\u578b",FundId:"1000",FundName:"\u6e2c\u8a66\u57fa\u91d15",WarningDesc:"\ufe59\u672c\u57fa\u91d1\u4e4b\u914d\u606f\u4f86\u6e90\u53ef\u80fd\u70ba\u672c\u91d1\ufe5a"},InvestRatio:35}],title:"\u6e2c\u8a66\u7d44\u540899\u865f"}:{}},mounted:function(){var t=this;this.localMode&&(this.answer.q1="1-2",this.answer.q3=Math.floor(3*Math.random())+1,this.answer.q4=Math.floor(5*Math.random())+1,this.answer.q5=Math.floor(5*Math.random())+1,this.answer.q6=Math.floor(5*Math.random())+1,this.step=3,this.complete=!0,this.planDetails=!0,this.$nextTick(function(){t.pieChart(),t.serieChart()}))},methods:{chkAnswer:function(t){var e=this,n=new Array;n[0]=function(){},n[1]=function(){e.answer.q1?"1-6"!=e.answer.q1||e.answer.q1_text?e.next():alert("\u8acb\u586b\u5beb\u81ea\u8a02\u76ee\u6a19"):alert("\u8acb\u9078\u64c7\u6295\u8cc7\u76ee\u7684")},n[2]=function(){e.answer.q2<5e4?alert("\u8acb\u586b\u5beb\u5927\u65bc50000\u7684\u91d1\u984d"):e.next()},n[3]=function(){e.answer.q3?e.next():alert("\u8acb\u9078\u64c7\u6295\u8cc7\u5e74\u9650")},n[4]=function(){e.answer.q4?e.next():alert("\u8acb\u9078\u64c7\u6295\u8cc7\u76c8\u8667\u5f71\u97ff\u7a0b\u5ea6")},n[5]=function(){e.answer.q5?e.next():alert("\u8acb\u9078\u64c7\u53ef\u63a5\u53d7\u6ce2\u52d5\u7a0b\u5ea6")},n[6]=function(){e.answer.q6?e.next():alert("\u8acb\u9078\u64c7\u8cc7\u7522\u4e0b\u8dcc\u4e8620%\u5f8c\u7684\u52d5\u4f5c")},this.questionnaire<0||6<this.questionnaire||n[this.questionnaire]()},next:function(){6!=this.questionnaire?this.questionnaire++:this.getResult()},agree:function(){var t=this;this.questionnaire=1,this.$nextTick(function(){t.$scrollTo("#questionnaire"),t.toggleModal("warning")})},toggle:function(){var t=this;this.planDetails=!this.planDetails,this.$nextTick(function(){t.$scrollTo(t.planDetails?"#plan-toggle":"#plan")})},setPromise:function(t,r,o){return new Promise(function(e,n){$.ajax({type:t,dataType:"json",url:r,data:o,success:function(t){e(t)},error:function(t){n(t)}})})},setQueryResult:function(t){return this.setPromise("GET",""+this.apiUrl+this.getGuid,t)},setFundValue:function(t,e){return this.setPromise("GET",""+this.valUrl+t,e)},getResult:function(){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.step=2,n.questionnaire++,t.next=4,new Promise(function(t){setTimeout(function(){if(99==n.getScore)return alert("\u60a8\u7684\u98a8\u96aa\u8a55\u4f30"+n.RiskDict[99][1]+"\uff0c"+n.RiskDict[99][2]),n.step=1,void(n.questionnaire=6);t()},333)});case 4:return t.prev=4,t.next=7,n.setQueryResult({});case 7:return e=t.sent,n.res=e,t.next=11,new Promise(function(t){n.pieChart(t)});case 11:return t.next=13,new Promise(function(t){n.serieChart(t)});case 13:return t.next=15,new Promise(function(t){setTimeout(function(){t()},900)});case 15:return t.next=17,new Promise(function(t){n.complete=!0,n.step=3,n.$nextTick(function(){n.$scrollTo("#plan")})});case 17:t.next=24;break;case 19:t.prev=19,t.t0=t.catch(4),n.step=1,n.questionnaire=6,console.log("setQueryResult-err:",t.t0);case 24:case"end":return t.stop()}},t,n,[[4,19]])}))()},setLineChart:function(r){var o=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.toggleModal("chart"),t.prev=1,t.next=4,o.setFundValue(r);case 4:return e=t.sent,n=void 0,t.next=8,new Promise(function(t){n=e.map(function(t){return[t[0],t[1]]}),setTimeout(function(){t()},333)});case 8:o.$nextTick(function(){o.lineChart(n)}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log("getFundValue-err:",t.t0);case 14:case"end":return t.stop()}},t,o,[[1,11]])}))()},lineChart:function(t){Highcharts.stockChart("plan-fundChart",{chart:{style:{fontFamily:'Arial, "Noto Sans TC", sans-serif'}},credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},navigator:{series:{type:"areaspline",color:"#ffffff",fillOpacity:.4,dataGrouping:{smoothed:!1},lineColor:"#3d6ed0",lineWidth:1,marker:{enabled:!1},shadow:!1},handles:{backgroundColor:"#fff",borderColor:"#666",lineWidth:1,width:20,height:17}},scrollbar:{barBackgroundColor:"#fff",barBorderRadius:5,barBorderWidth:2,barBorderColor:"#ccc",rifleColor:"#3c3c3c",minWidth:"1",buttonBackgroundColor:"#fff",buttonBorderWidth:2,buttonBorderColor:"#3d6ed0",buttonArrowColor:"#3d6ed0",buttonBorderRadius:20,trackBackgroundColor:"#f4f4f4",trackBorderWidth:3,trackBorderColor:"#fff",trackBorderRadius:7,size:20},rangeSelector:{allButtonsEnabled:!0,buttonSpacing:10,selected:0,inputEnabled:!1,buttons:[{type:"month",count:1,text:"1\u6708"},{type:"month",count:3,text:"3\u6708"},{type:"month",count:6,text:"6\u6708"},{type:"year",count:1,text:"1\u5e74"},{type:"year",count:3,text:"3\u5e74"},{type:"year",count:5,text:"5\u5e74"},{type:"year",count:10,text:"10\u5e74"}],buttonTheme:{r:30,"stroke-width":2,fill:"#fff",height:28,states:{select:{fill:"#3d6ed0",stroke:"#3d6ed0",style:{color:"white"}}}},labelStyle:{color:"silver",fontWeight:"bold"},buttonPosition:{x:992<=window.innerWidth?10:-20}},title:{text:"\u57fa\u91d1\u6de8\u503c\u8d70\u52e2\u5716",style:{color:"#222",fontSize:"20px"}},xAxis:{dateTimeLabelFormats:{second:"%Y-%m-%d<br/>%H:%M:%S",minute:"%Y-%m-%d<br/>%H:%M",hour:"%Y-%m-%d<br/>%H:%M",day:"%Y<br/>%m-%d",week:"%Y<br/>%m-%d",month:"%Y-%m",year:"%Y"}},yAxis:{opposite:!1,lineColor:"red"},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"rgba(61, 110, 208, 0.3)"],[1,"rgba(255, 255, 255, 0)"]]}},series:{dataGrouping:{enabled:!0,approximation:"open"},marker:{fillColor:"#3d6ed0",lineWidth:2,lineColor:"rgba(255, 255, 255, 0.8)",radius:6}}},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",borderColor:"#fff",borderWidth:0,borderRadius:10,shadow:!1,style:{color:"#fff",fontSize:"16px"},valueDecimals:2,xDateFormat:"%Y-%m-%d"},series:[{type:"area",name:"\u6de8\u503c",data:t,color:"#3d6ed0"}]})},pieChart:function(e){var t=this.res.rp_list.map(function(t){return{name:t.FundInfo.FundName,y:t.InvestRatio}}),n=Highcharts.chart("investmentRatio-chart",{colors:this.color,credits:{enabled:!1},chart:{type:"pie",width:220,height:220},title:{text:"\u6295\u8cc7\u6bd4\u4f8b",align:"center",verticalAlign:"middle",x:3.5,y:0},subtitle:{text:"5.00%",align:"center",verticalAlign:"middle",x:5,y:37.5,style:{color:"#eb6100"}},tooltip:{enabled:!0,headerFormat:'<span style="font-size: .7rem">{point.key}  </span>',pointFormat:'<span style="font-size: .7rem">{point.percentage:.2f}%</span>',valueSuffix:"%"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:45,innerSize:"75%",dataLabels:{enabled:!1},showInLegend:!1,point:{events:{click:function(t){n.setTitle({text:"\u6295\u8cc7\u6bd4\u4f8b",align:"center",verticalAlign:"middle",x:3.5,y:0},{text:t.point.percentage.toFixed(2)+"%",align:"center",verticalAlign:"middle",x:5,y:37.5,style:{color:"#eb6100"}})}}}}},series:[{data:t}]},function(t){t.series[0].data[0].select(),e&&e()})},serieChart:function(e){var n=[];n=this.res.rp_list.map(function(t){return t.FundInfo.FundCategory}).reduce(function(t,e){return t[e],t[e]=t[e]?t[e]+1:1,t},{});var r=Object.values(n).reduce(function(t,e){return t+e},0);n=Object.keys(n).map(function(t){return[t,100*n[t]/r]}),Highcharts.chart("fundCategory",{credits:{enabled:!1},chart:{type:"column",backgroundColor:null},title:{text:""},xAxis:{type:"category",labels:{style:{fontSize:"15px"}}},yAxis:{min:0,title:{text:""}},legend:{enabled:!1},tooltip:{pointFormat:"{point.y:.2f} %"},series:[{colorByPoint:!0,data:n,dataLabels:{enabled:!0,color:"#000000",style:{color:"black",fontSize:"15px",fontWeight:"normal",textOutline:"0px"},format:"{point.y:.2f}%",y:10}}]},function(t){e&&e()})}}};